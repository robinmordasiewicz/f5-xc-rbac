openapi: 3.0.3
info:
  title: XC Sync Minimal Contracts
  version: '1.0'
  description: Minimal contract for required user/group/membership operations used by the sync service.
paths:
  /user_roles:
    get:
      summary: List users / roles (used for pre-validation)
      responses:
        '200':
          description: A list of user role objects
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      type: object
                      properties:
                        username:
                          type: string
                        email:
                          type: string
  /users:
    post:
      summary: Create user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email]
              properties:
                email:
                  type: string
                username:
                  type: string
                display_name:
                  type: string
      responses:
        '201':
          description: User created
        '409':
          description: Conflict (already exists)
  /user_groups:
    get:
      summary: List user groups
      responses:
        '200':
          description: List of groups
    post:
      summary: Create group
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [name]
              properties:
                name:
                  type: string
                display_name:
                  type: string
      responses:
        '201':
          description: Group created
  /user_groups/{name}:
    put:
      summary: Replace group (set members)
      parameters:
        - name: name
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                usernames:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: Group updated
  /user_groups/{name}/members:
    post:
      summary: Add membership(s)
      parameters:
        - name: name
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                usernames:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: Members added
